<!-- 模板引擎动态生成整体数据，主要为国际化语言服务 -->
<meta http-equiv="pragma" content="no-cache"  />
<script id="globalData_coreMain" type="text/html">
<div id="globalData">

    <div id='avatarBox' style="display: none;"></div>

    <div id='treeBox' class="tree" style="overflow: auto;">
      
    </div>
    
    <div style="background: #fff;width: 100%;">
    <!-- 详情框 -->
      <div id="dataView" style="display: block;overflow: hidden;width: 50%;margin: 0 auto">

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{companyName}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="companyName" placeholder="{{companyName}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{organizationCode}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="organizationCode" placeholder="{{organizationCode}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{legalPerson}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="legalPerson" placeholder="{{legalPerson}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{contactPhone}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="contactPhone" placeholder="{{contactPhone}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>


          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{contactEmail}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="contactEmail" placeholder="{{contactEmail}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerCapital}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="registerCapital" placeholder="{{registerCapital}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerDate}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="registerDate" placeholder="{{registerDate}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{personnelScale}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="personnelScale" placeholder="{{personnelScale}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{enterpriseTypeChn}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="enterpriseTypeChn" placeholder="{{enterpriseTypeChn}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{enterpriseTypeBank}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="enterpriseTypeBank" placeholder="{{enterpriseTypeBank}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{industry}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="industry" placeholder="{{industry}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerProvince}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="registerProvince" placeholder="{{registerProvince}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerCity}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="registerCity" placeholder="{{registerCity}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>
          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerRegion}}:</label>
                  <div class="col-md-8" >
                      <input type="text" class="form-control field" name="registerRegion" placeholder="{{registerRegion}} " value="" disabled='disabled' />
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{registerAddress}}:</label>
                  <div class="col-md-8" >
                      <textarea name="registerAddress"  style="width: 560px;"  class="form-control field" cols="30" rows="2"  placeholder="{{registerAddress}}" disabled='disabled'  value=""/> 
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{businessScope}}:</label>
                  <div class="col-md-8" >
                      <textarea name="businessScope"  style="width: 560px;"  class="form-control field" cols="30" rows="2"  placeholder="{{businessScope}}" disabled='disabled'  value=""/> 
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{incomeSource}}:</label>
                  <div class="col-md-8" >
                      <textarea name="incomeSource"  style="width: 560px;"  class="form-control field" cols="30" rows="2"  placeholder="{{incomeSource}}" disabled='disabled'  value=""/> 
                  </div>
              </div>
          </div>

          <div class="col-md-12">
              <div class="form-group">
                  <label class="col-md-4 control-label ">{{otherMemo}}:</label>
                  <div class="col-md-8" >
                      <textarea name="otherMemo"  style="width: 560px;"  class="form-control field" cols="30" rows="2"  placeholder="{{otherMemo}}" disabled='disabled'  value=""/> 
                  </div>
              </div>
          </div>



          <div class="col-md-12" style="margin:20px 0 30px 0;">
              <div class="form-group">
                  <div class="col-md-12">
                      <div style="width:203px;margin: 0 auto">
                        <span id="confirmBtn" class="btn btn-primary pull-left fa fa-check"> {{coreMainedit}}</span>
                    </div>
                  </div>
              </div>
          </div>
      </div>
    </div>
</div>
</script>

<script>
//定义全局对象
var globalData={
  init:function(){
    //生成整体数据，主要为国际化语言服务
    $('#main').prepend(template('globalData_coreMain',$.dataLanguage()));


    $('#zCheck').off().on('click','li',checkAll).removeClass('active');
   // this.getOrg(globalData.data);
   // this.getRole(globalData.data);
   // alert(common_data.user)
   // alert(common_data.user.userId);
    //调用所有事件
    this.event();
    this.getglobalDataDetail(common_data.user.userId)

    $.zCompositeData(common_params['rbac']['status'],'[name="status"]',true);
    // $.zCompositeData(common_params['rbac']['sex'],'[name="sex"]',true);
    // $.zCompositeData(common_params['rbac']['userType'],'[name="userType"]',true);
    //填充验证
    $.zCommonReg(reg.email,'[name="email"]');
    $.zCommonReg(reg.phonenumber,'[name="phonenumber"]');

    $.zSpecialData(common_params['rbac']['sex'],'#dataView [name="sex"]');

    $.inputReg('[name="phonenumber"]','keyup','number')

    for(var i=1;i<7;i++){
      $('#avatarBox').append('<img src="../assets/images/avatar/avatar_0'+i+'.jpg" />')
    }


  },

  //定义全局请求参数对象
  data:{
    pageNum:1,
    pageSize:10
  },

  //回显数据,同时可用于区分新增和（详情修改）的区别
  getglobalDataDetail:function(_id){
    //如果_id有效，则是详情或者修改
    if(_id){
      $.zAjax({
        url: project.host()+'/v1/coreMainTain' ,
        isString:false,
        success: function(data) {
        	console.log(data);
          $('#dataView').find('.field').each(function(){
            var key=$(this).attr('name');
            $(this).val(data[key]);
          });
          
          $('#orgTreeSelect>.choice').html(data.orgName);
          $('#orgTreeSelect').next('input[type="hidden"]').val(data.orgId);
          var list=data.roleIds?data.roleIds.split(','):[];
          list.forEach(function(n,i){
            $('#zCheck [roleid='+n+']').click();
          });

          $('#zCheck').off('click').addClass('active');
        }
      });
    }
  },

  event:function(){

    $('#confirmBtn').click(function(argument) {
        window.location.href ="#/coreMaintainEdit";
       // window.location.href ="#/user/info" ;
    	//<a href="#/user/info" class="lang" langid="editUser">修改用户资料</a>
    });
  }
}
$(document).ready(function() {
  //初始化
    globalData.init();
});

</script>